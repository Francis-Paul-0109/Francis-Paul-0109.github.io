---
layout: none
---

<!DOCTYPE html>
<html lang="ko">
<head>
  {% include head.html %}
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: "MyHeaderFont", sans-serif;
      overflow-x: hidden;
      transition: background 0.5s ease;
    }

    /* 좌측 고정 이미지 */
    .fixed-image {
      position: fixed;
      top: 50%;
      left: 5%;
      transform: translateY(-50%);
      width: 30%;
      max-width: 350px;
      z-index: 5;
      pointer-events: none;
    }
    .fixed-image img {
      width: 100%;
      border-radius: 8px;
      transition: opacity 0.5s ease-in-out;
    }

    /* 우측 스크롤 텍스트 */
    .scrolly-text {
      width: {% if page.text_width %}{{ page.text_width }}{% else %}80%{% endif %};
      margin-left: {% if page.text_margin_left %}{{ page.text_margin_left }}{% else %}20%{% endif %};
      padding-top: {% if page.text_padding_top %}{{ page.text_padding_top }}{% else %}2vh{% endif %};
      padding-bottom: 4rem;
      font-size: 1.15rem;
      line-height: 1.7;
      white-space: pre-line;
      {% if page.text_color %}
      color: {{ page.text_color }} !important;
      {% else %}
      color: #fff !important;
      {% endif %}
    }

    /* 스텝 기본/활성화 */
    .step {
      margin: 80vh 0;
      transform: translateY(30px);
      opacity: 0;
    }
    .step.active {
      opacity: 1;
    }

    /* 번호 표시 */
    .step[data-step]::before {
      content: attr(data-step) ". ";
      font-weight: bold;
      color: #ff9800;
    }

    /* 키워드 강조 */
    .highlight-keyword {
      font-weight: bold;
      color: #ff9800;
    }
  </style>
</head>

<body {% if page.background_color %}style="background-color: {{ page.background_color }};"{% endif %}>

  <!-- 좌측 고정 이미지 -->
  <div class="fixed-image">
    <img id="auto-img" src="">
  </div>

  <!-- 우측 스크롤 텍스트 -->
  <div class="scrolly-text">
    {{ content }}
  </div>

  <!-- GSAP + ScrollTrigger -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.15.0/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.15.0/ScrollTrigger.min.js"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    const steps = document.querySelectorAll(".step");
    const img = document.getElementById("auto-img");

    if(steps.length > 0){
      steps[0].classList.add("active");
      img.src = `/assets/images/{{ page.slug | default: page.title }}/` + steps[0].dataset.img;
    }

    steps.forEach(step => {
      ScrollTrigger.create({
        trigger: step,
        start: "top 70%",
        end: "bottom 30%",
        onEnter: () => activateStep(step),
        onEnterBack: () => activateStep(step)
      });
    });

    function activateStep(step){
      // 이미지 변경
      const newImg = step.dataset.img;
      if(img.src.indexOf(newImg) === -1){
        gsap.to(img, {opacity:0, duration:0.4, onComplete:()=>{
          img.src = `/assets/images/{{ page.slug | default: page.title }}/` + newImg;
          gsap.to(img, {opacity:1, duration:0.4});
        }});
      }

      // 텍스트 활성화
      steps.forEach(s => s.classList.remove("active"));
      step.classList.add("active");

      // 등장 애니메이션
      gsap.fromTo(step, {y:30, opacity:0}, {y:0, opacity:1, duration:0.6, ease:"power2.out"});

      // 핵심 키워드 강조
      const kw = step.querySelectorAll(".highlight-keyword");
      kw.forEach(k => {
        gsap.fromTo(k, {scale:0.8, color:"#ff9800", opacity:0},
                          {scale:1, color:"#ff9800", opacity:1, duration:0.6, ease:"back.out(1.7)"});
      });
    }
  </script>

</body>
</html>
